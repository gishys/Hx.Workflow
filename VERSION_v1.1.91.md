# 版本 v1.1.91

## 版本标题
工作流节点更新优化与归档过滤功能增强

## 版本描述

本次更新主要优化了工作流节点的更新逻辑，并新增了归档模板定义的查询过滤功能。

### 主要改进

**节点属性更新完善**
- 修复了节点更新时部分属性未正确更新的问题
- 新增节点属性设置方法，支持完整更新所有节点属性（显示名称、节点类型、限制时间等）
- 完善了集合属性的更新逻辑（分支参数、表单、流程参数、材料等）

**版本创建逻辑优化**
- 修复了使用节点名称匹配导致的更新失败问题
- 改用节点ID进行匹配，确保即使节点名称变更也能正确更新

**API功能增强**
- 新增 `includeArchived` 参数，支持查询时控制是否包含已归档的模板定义
- 默认不包含已归档定义，保持向后兼容

### 技术细节

- 在 `WkNode` 实体中新增 `SetDisplayName`、`SetStepNodeType`、`SetLimitTime` 方法
- 优化了 `UpdateNodesInCurrentVersionAsync` 方法的更新逻辑
- 改进了 `CreateNewVersionForNodeUpdateAsync` 方法的节点匹配机制
- 增强了 `GetAllWithChildrenAsync` 方法的归档过滤功能

---

**发布日期**: 2025-11-19

